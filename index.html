<html lang="cs">
<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            background-color: #242526;
            color: #b0b3b8;
            font-family: Arial, Helvetica, sans-serif;
        }
        canvas {
            width: 90% !important;
            height: 85% !important;
            min-width: 950px;
            color: #b0b3b8;
            margin: auto;
        }

        button {
            color: #b0b3b8;
            background-color: #5a2a75;
            padding: 10px;
            border-radius: 5px;
            border-width: 0;
            transition: 0.5s;
            width: 100%;
        }
        button:hover {
            --bg-opacity: 0;
            box-shadow: none;
            background-color: #242526;
            transition: 0.5s;
        }
    </style>
    </head>
    <body>
        <label>Aktuální počet lidí: </label>
        <label id="actCount"></label>
        <br>
        <label>Poslední aktualizace: </label>
        <label id="lastUpdate"></label>

        <hr>
        <input id="yearInp" placeholder="Rok" type="number" min="23">
        <input id="yearInp2" placeholder="Rok konec" type="number" min="23">
        <br>
        <input id="monthInp" placeholder="Měsíc" type="number" min="1" max="12">
        <input id="monthInp2" placeholder="Měsíc konec" type="number" min="1" max="12">
        <br>
        <input id="dayInp" placeholder="Den" type="number" min="1" max="31">
        <input id="dayInp2" placeholder="Den konec" type="number" min="1" max="31">
        <br>
        <input id="hourInp" placeholder="Hodina" type="number" min="0" max="23">
        <input id="hourInp2" placeholder="Hodina konec" type="number" min="0" max="23">
        <br>
        <input id="minuteInp" placeholder="Minuta" type="number" min="0" max="50" step="10">
        <input id="minuteInp2" placeholder="Minuta konec" type="number" min="0" max="50" step="10">
        <br><br>
        <button onclick="change()">Zobrazit</button>
        <hr>

        <canvas id="myChart"></canvas>

    </body>

    <script src="./data.js"></script>
    <script src="./chart.js"></script>
    <script src="./formatTime.js"></script>
    <script src="./filter.js"></script>
    <script src="./update.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    <script>
        /*Find last update and return [value, date->need reworkTime]*/
        function findLast(obj, date="") {
            let keys = Object.keys(obj);
            let lastKey = keys[keys.length-1];
            let nextObj = obj[lastKey];
            date = lastKey + "." + date;
            if (Array.isArray(nextObj)) {
                let index = nextObj.length - 1;
                let indexStr = index * 10;
                if (indexStr == 0) indexStr = "00";
                else indexStr = indexStr.toString();
                return [nextObj[index], indexStr + "." + date];
            }
            return findLast(nextObj, date);
        }
        var last = findLast(data);

        var label = document.getElementById("actCount");
        label.innerHTML = last[0];

        var label2 = document.getElementById("lastUpdate");
        label2.innerHTML = reworkTime(last[1]);

        const chart = null;

        setDefault();
        change();
        
    </script>
</html>